<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>KUDHIN BILL SPLITTER - MVR</title>
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
:root {
  --primary: #1e88e5;
  --primary-dark: #1565c0;
  --light-bg: #f5f8fc;
  --dark-bg: #1e1e1e;
  --dark-card: #2a2a2a;
  --name-color: #1e88e5;
  --name-color-dark: #00ffff;
}
body { font-family: 'Segoe UI', sans-serif; max-width: 900px; margin: auto; padding: 20px; background-color: var(--light-bg); color: #222; transition: background-color 0.3s, color 0.3s; }
h1 { text-align: center; color: var(--primary); margin-bottom: 15px; }
.dark-mode { background-color: var(--dark-bg); color: #f5f5f5; }
.dark-mode table,.dark-mode input,.dark-mode button,.dark-mode .result,.dark-mode .history-entry { background-color: var(--dark-card); color: #f5f5f5; border-color: #555; }
table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; border-radius: 6px; overflow: hidden; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
th { background-color: var(--primary); color: white; }
input[type=text], input[type=number], input[type=date] { width: 100%; padding: 6px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
button { background-color: var(--primary); color: white; border: none; border-radius: 5px; padding: 8px 14px; margin-top: 10px; cursor: pointer; font-size: 14px; transition: background-color 0.2s; }
button:hover { background-color: var(--primary-dark); }
.delete-btn { background-color: #e53935; }
.delete-btn:hover { background-color: #c62828; }
.result, .history-entry { margin-top: 20px; padding: 15px; border-radius: 8px; background: #e3f2fd; border: 1px solid #90caf9; }
.name-highlight { color: var(--name-color); font-weight: bold; }
.dark-mode .name-highlight { color: var(--name-color-dark); }
.tab-buttons { margin-bottom: 10px; }
.tab-buttons button { margin-right: 5px; }
@media (max-width: 600px) { table, tr, td, th { font-size: 14px; } }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<h1>KUDHIN BILL SPLITTER</h1>
<button onclick="toggleDarkMode()">ðŸŒ™ Toggle Dark Mode</button>

<div class="tab-buttons">
  <button onclick="showTab('main')">Bill Splitter</button>
  <button onclick="showTab('history')">History</button>
  <button onclick="showTab('summary')">Per Person Summary</button>
</div>

<div id="main-tab">
  <table id="billTable">
    <tr><th>Person</th><th colspan="4">Item Prices (MVR)</th><th>Action</th></tr>
  </table>
  <button onclick="addRow()">âž• Add Person</button><br><br>
  <label>Service Charge (%): <input type="number" id="serviceChargePercent" value="0" step="0.01"></label><br><br>
  <label>Service Charge (Amount): <input type="number" id="serviceChargeAmount" value="0" step="0.01"></label><br><br>
  <button onclick="calculateBill()">âœ… Calculate</button>
  <button onclick="downloadPDF()">ðŸ“¥ Download PDF</button>
  <div class="result" id="result"></div>
</div>

<div id="history-tab" style="display:none;">
  <h2>ðŸ•˜ Bill History</h2>
  <label>Filter by Date: <input type="date" id="filterDate" onchange="renderHistory()"></label>
  <div id="historyContainer"></div>
</div>

<div id="summary-tab" style="display:none;">
  <h2>ðŸ“Š Per Person Summary</h2>
  <div id="summaryContainer"></div>
</div>

<script>
...

<script>
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw.js')
  .then(()=>console.log('Service Worker Registered'))
  .catch(err=>console.log(err));
}
</script>

</body>
</html>
